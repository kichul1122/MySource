# Math

[코드정리](https://github.com/geniikw/JustCodePlz)

 - 유니티 왼손좌표계  

로컬공간 - 로컬좌표계  
월드공간 - 월드 좌표계  
뷰공간 - 
스크린공간 - 스크린좌표계 : 화면 왼쪽 아래 구석을 원점으로, 화면 해상도에 따른 픽셀 위치를 단위로하는 2D 직교좌표계, Camera.main.WorldToScreenPoint  

뷰포트 좌표 : 스크린 좌표를 정규화한 좌표로 화면 해상도에 관계없이 항상 왼쪽아래가 (0,0), 오른쪽 위가 (1,1), 어떤 물체가 화면 안에 들어오는지 화면 해상도에 관계없이 쉽게 판정가능  

- 단위 벡터 : 각 성분을 벡터의 길이로 나눈 벡터

- 법선벡터(법선 : 수직인 직선)  
2D : 어떤 벡터에 수직인 벡터  
3D : 어떤 평면에 수직인 벡터  
벅선벡트는 평면을 정의하는 데도 사용 할 수 있다. 점P와 P를 시점으로 하는 법선벡터 N이 있을 때 P를 포함 하는 평면의 표면이 어느 쪽을 향하는지 결정 할 수 있다.  

벡터는 기하학적인 벡터 공간을 구성하는 연산뿐 아니라 다른 종류의 연산도 부가적으로 정의 할 수 있다 - 내적, 외적  

- 내적 : 두 개의 벡터를 하나의 스칼라양으로 변환하는 연산  
내적공간 : 내적이 추가된 공간  
분배법칙, 교환법칙, 스칼라 상수 곱하기

A·A = ||A||²  
A·B = ||A||||B||cos(θ)  
  
위치벡터 A의 좌표 (Ax, Ay)  
A·B = Ax*bX + Ay*By + Az*Bz  

- 벡터의 직교 투영  
벡터 A의 종점에서 벡터B를 향해 수직으로 내린 선과 B가 교차하는 점에서부터 B의 시점 까지의 길이는 ||A||cos(θ)  
B가 단위 벡터 일때 A·B = ||A||cos(θ)  
A를 B로 직교 투영한 길이를 가지는 벡터B′는 B가 단위벡터일때 B′ = (A·B)B [벡터를 스칼라배]

- 벡터 투영 응용  
어떤 벡터를 새로운 좌표계, 즉 새로운 표준 기저 벡터들로 펴현한다고 해보자. 이때 벡터를 새로운 각 기저 벡터에 투영해야한다. 기저 벡터들은 모두 단위 벡터이므로 위의 수식을 그대로 사용할 수 있다. 또한, 충돌 검사에서도 한 벡터를 다른 벡터에 투영하는 경우가 자주 나온다.  

평면에서 걷던 플레이어가 경사로에 올라가게 되면 플레이어의 방향벡터가 경사로방향의 벡터로 바뀌어야 자연스럽게 된다. 이때 경사로에 투영된 단위 벡터를 플레이어의 방향벡터로 생각하면 된다.


- 내적의 응용  
	1.내적 값의 부호, A와 B 길이의 곱, A와 B의 내적 비교함으로서 판별 가능한 것들
		A와B가 같은 방향
		A와 B가 직각
		A와 B가 반대
		A와 B의 θ가 90도 보다 작을때
		A와 B의 θ가 90도와 180도 사이일때

	2.어떤 벡터를 중심으로 정해진 각 범위 내에 물체가 존재하는지 판별하기(적의 시야각)  
	적의 방향벡터v, 적에서 플레이어로 향하는 방향벡터w, 적의 시야각a, v와 w 사이각을 b라고 하면, cos(b) > cos(a/2)이면, 플레이어는 적의 시야각 안에 있다. 이렇게 cos값의 비교를 통해서 알 수 있고, cos(b)의 값은 두 벡터 v와 w의 내적을 통해서 쉽게 구할 수 있다.

	3.적이 주인공 앞에 있는지 뒤에 있는지 알고 싶다면 주인공의 방향 벡터와 주인공의 위치에서 적을 향하는 벡터를 내적하여 결과가 양이면 
	적이 주인공 앞에 있는 것이고, 음이면 주인공 뒤에 있는 것이다.(주인공의 시야각을 180도라고 정하고 것이랑 다름 없다)  

	4.두 벡터가 단위 벡터일 경우 내적의 절대값이 1이면 두 단위 벡터가 평행임을 알 수 있다. (정규화와 내적으로 23번의 연산이 필요)
	하지만 두 벡터가 모두 단위 벡터가 아닐경우 정규화를 위한 연산이 들어 가야한다. 이럴땐 외적을 이용해서 두 벡터의 평행성을 따지는 것이 더 효율 적이다.(외적은 1번의 외적과 1번의 내적으로 14번의 연산이 필요)  

	5.램버트 라이트 만들기 - 버텍스 노말과 빛의 역방향과의 내적 => 빛의 밝기(0~1)
	6.반사벡터구하기(Phlng 공식의 원리)

- 외적  
두개의 벡터에서 새로운 한 개의 벡터를 생성하는 연산(3차원 이상)  
외적으로 생성되는 벡터는 두 개의 벡터 a,b에 수직이고, a,b로 이루어지는 평생사변형의 면적과 크기가 같은 벡터이다.  
a x b = (||a||||b||sinθ)u  
u는 a와b에 수직인 단윈벡터  
||a x b|| = ||a||||b||sinθ  
교환법칙이 성립하지않음 => 외적에서는 곱하는 순서에 의미가 있다  
A x B = (AyBz-AzBy, AzBx-AxBz, AxBy-AyBx)  
xyzzy  
yzxxz  
zxyyx  

- 외적의 응용  
	1.외적의 크기는 평행 판정에 사용 할 수 있다.  (v x w)·(v x w) = 0이면, v와 w는 평행이다.  
	2.평면의 법선 벡터 구하기 : 세 개의 정점으로 구성되는 삼각형의 두 변을 이루는 벡터의 외적을 구해 정규화해주면, 그 삼각형이 존재하는 평면의 법선벡터를 얻을 수 있다.  
	3.카메라 행렬 구하기 : 카메라를 원점으로 하고 카메라가 보는 방향 벡터와 게임 세계에서 천장이나 하늘을 가리키는 상향(up)벡터를 가지고 카메라 좌표계를 만들어야한다. 이 두 벡터를 가지고 두 번의 외적을 통해서 카메라 좌표계의 세 축을 구할 수 있다.  
	4.주인공 A와 적 B가 있을경우, 적이 주인공의 오른쪽에 있는지 왼쪽에 있는지 구하기 : A의 전방벡터를 v, A에서 B를 향하는 벡터를 w, 게임 세계의 상향 벡터를 up => 만약 up·(v x w) < 0이면, 적 B는 주인공 A의 왼쪽에 있고, 반대로 up·(v x w) > 0이면, 오른쪽에 있다. u·(v x w) : 스칼라 삼중곱  







